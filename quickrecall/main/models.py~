# models.py
 
from google.appengine.ext import db
 
class Visitor(db.Model):
    ip = db.StringProperty()
    added_on = db.DateTimeProperty(auto_now_add=True)

class Player(db.Model):
    user = db.UserProperty(required=True)

class PlayerAnswers(db.Model):
    correct = db.BooleanProperty(required=True)
    player = db.ReferenceProperty(Player, required=True,
                                  collection_name ='player_answers')
    question = db.ReferenceProperty(Question, required=True,
                                    collection_name='player_answers')

class TeamPlayerLink(db.Model):
    team = db.ReferenceProperty(Team, required=True,
                                collection_name='players')
    player = db.ReferenceProperty(Player, required=True,
                                  collection_name='teams')
    
class Team(db.Model):
    team_name = db.StringProperty(required=True)
    

class Match(db.Model):
    team = db.ReferenceProperty(Team, required=True,
                                collection_name='matches')
    score = db.IntegerProperty(required=True)
    win = db.BooleanProperty(required=True)
    time = db.DateTimeProperty(required=True)

class MatchStats(db.Model):
    match = db.ReferenceProperty(Match, required=True,
                                 collection_name='match_stats')
    team_miss = db.IntegerProperty(required=True)
    team_correct = db.IntegerProperty(required=True)
    player_miss = db.IntegerProperty(required=True)
    player_correct = db.IntegerProperty(required=True)

class Question(db.Model):
    question = db.TextProperty(required=True)
    answer = db.ReferenceProperty(Answer, required=True,
                                  collection_name='questions')

class QuestionTagLink(db.Model):
    question = db.ReferenceProperty(Question, required=True,
                                    collection_name='tags')
    tag = db.ReferenceProperty(Tag, required=True,
                               collection_name='questions')
    
class Answer(db.Model):
    answer = db.TextProperty(required=True)

class Tag(db.Model):
    tag = db.CategoryProperty(required=True)
